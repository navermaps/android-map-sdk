
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Location · NAVER Map Android SDK</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-codegroup/code.group.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="4-1.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Home
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="0.html">
            
                <a href="0.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Developer Guide</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="1.html">
            
                <a href="1.html">
            
                    
                    Get Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" >
            
                <span>
            
                    
                    Map and Coordinates
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="2-1.html">
            
                <a href="2-1.html">
            
                    
                    Map Object
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="2-2.html">
            
                <a href="2-2.html">
            
                    
                    Coordinates Object
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="2-3.html">
            
                <a href="2-3.html">
            
                    
                    Map Options
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" >
            
                <span>
            
                    
                    Camera
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="3-1.html">
            
                <a href="3-1.html">
            
                    
                    Camera and Projection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="3-2.html">
            
                <a href="3-2.html">
            
                    
                    Camera Movement
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4" >
            
                <span>
            
                    
                    Interaction
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="4-1.html">
            
                <a href="4-1.html">
            
                    
                    User Interface
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.4.2" data-path="4-2.html">
            
                <a href="4-2.html">
            
                    
                    Location
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5" >
            
                <span>
            
                    
                    Overlay
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.1" data-path="5-1.html">
            
                <a href="5-1.html">
            
                    
                    Overlays
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.2" data-path="5-2.html">
            
                <a href="5-2.html">
            
                    
                    Marker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.3" data-path="5-3.html">
            
                <a href="5-3.html">
            
                    
                    Info Window
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.4" data-path="5-4.html">
            
                <a href="5-4.html">
            
                    
                    Shapes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.5" data-path="5-5.html">
            
                <a href="5-5.html">
            
                    
                    Location Overlay
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.6" data-path="5-6.html">
            
                <a href="5-6.html">
            
                    
                    Ground Overlay
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.7" data-path="5-7.html">
            
                <a href="5-7.html">
            
                    
                    Path and Arrow
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Reference</li>
        
        
    
        <li class="chapter " data-level="3.1" >
            
                <a target="_blank" href="ref://../reference/">
            
                    
                    API Reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" >
            
                <a target="_blank" href="https://github.com/navermaps/android-map-sdk">
            
                    
                    Demo Project
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" >
            
                <a target="_blank" href="https://github.com/navermaps/android-map-sdk/blob/master/CHANGELOG.md">
            
                    
                    Changelog
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">See Also</li>
        
        
    
        <li class="chapter " data-level="4.1" >
            
                <a target="_blank" href="ref://../guide-ko/">
            
                    
                    한국어(Korean)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" >
            
                <a target="_blank" href="https://navermaps.github.io/ios-map-sdk">
            
                    
                    iOS SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" >
            
                <a target="_blank" href="https://www.ncloud.com">
            
                    
                    NAVER CLOUD PLATFORM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" >
            
                <a target="_blank" href="https://www.ncloud.com/support/question/service">
            
                    
                    Questions / Contact Us
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Location</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="location">Location</h1>
<p>An app using maps usually tracks a user&#x2019;s location and displays it on the map. The NAVER Maps SDK helps you easily implement such features by providing the location overlay and location tracking feature. You can also implement your own location based features, without using the embedded location tracking feature.</p>
<h2 id="location-overlay">Location overlay</h2>
<p>It is recommended to use a location overlay when you need to display a user&#x2019;s location on the map. Only one location overlay exists on a map, and it supports location specific characteristics, such as coordinates and directions. For more information, refer to <a href="5-5.html">Location overlay</a>.</p>
<h2 id="embedded-location-tracking-feature">Embedded location tracking feature</h2>
<p>The NAVER Maps SDK supports the location tracking feature which receives a user location event, displays the location on the map and moves the camera.</p>
<h3 id="permissions-and-locationsource">Permissions and LocationSource</h3>
<p>Since the NAVER Maps SDK basically does not use user&#x2019;s location information, it does not request location-related permissions from users. Therefore, for apps using the location tracking feature, you should specify <a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_COARSE_LOCATION" target="_blank"><code>ACCESS_COARSE_LOCATION</code></a> or <a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_FINE_LOCATION" target="_blank"><code>ACCESS_FINE_LOCATION</code></a> permission in <code>AndroidManifest.xml</code>.</p>
<p>The following code example specifies the <code>ACCESS_FINE_LOCATION</code> permission in <code>AndroidManifext.xml</code>.</p>
<pre><code class="lang-XML"><span class="hljs-tag">&lt;<span class="hljs-name">manifest</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.permission.ACCESS_FINE_LOCATION&quot;</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span>
</code></pre>
<p>In addition, you should call <a href="ref://../reference/com/naver/maps/map/NaverMap.html#setLocationSource%28com.naver.maps.map.LocationSource%29" target="_blank"><code>setLocationSource()</code></a> to set a <a href="ref://../reference/com/naver/maps/map/LocationSource.html" target="_blank"><code>LocationSource</code></a> implementation. <code>LocationSource</code> is an interface that provides location to the NAVER Maps SDK. As the <code>LocationSource</code>&#x2019;s methods including <a href="ref://../reference/com/naver/maps/map/LocationSource.html#activate%28com.naver.maps.map.LocationSource.OnLocationChangedListener%29" target="_blank"><code>activate()</code></a> and <a href="ref://../reference/com/naver/maps/map/LocationSource.html#deactivate%28%29" target="_blank"><code>deactivate()</code></a> are called by the map object, do not directly call it.</p>
<h3 id="fusedlocationsource">FusedLocationSource</h3>
<p>The NAVER Maps SDK provides <a href="ref://../reference/com/naver/maps/map/util/FusedLocationSource.html" target="_blank"><code>FusedLocationSource</code></a>, an implementation that returns the best location by using <a href="https://developers.google.com/android/reference/com/google/android/gms/location/FusedLocationProviderClient" target="_blank"><code>FusedLocationProviderClient</code></a> of <a href="https://developers.google.com/android/guides/overview" target="_blank">Google Play Service</a>, terrestrial magnetism and acceleration sensors. To use <code>FusedLocationSource</code>, you should add dependencies for <code>play-services-location</code> to <code>build.gradle</code> of your app module.</p>
<p><div id="99365c656d01d11de47b173059bb6daa" class="gbcg gbcg-codegroup">
  <div class="gbcg-tab-selectors">
    <a id="select-0-117d9d200e03ddcd55bb479f74cfd65b" class="gbcg-selector gbcg-active" data-tab="0-117d9d200e03ddcd55bb479f74cfd65b" data-tab-category="gradle">Groovy</a>
    <a id="select-1-7cab94b5c6365e9499271dbdb955682c" class="gbcg-selector" data-tab="1-7cab94b5c6365e9499271dbdb955682c" data-tab-category="gradle">Kotlin</a>
  </div>
  <div class="gbcg-tab-contents">
    <div id="gbcg-tab-container">
      <div id="0-117d9d200e03ddcd55bb479f74cfd65b" class="gbcg-tab-item gbcb-Groovy">
        <pre><code class="lang-Gradle"><span class="hljs-keyword">dependencies</span> {
    implementation <span class="hljs-string">&apos;com.google.android.gms:play-services-location:16.0.0&apos;</span>
}
</code></pre>
      </div>
    </div>
    <div class="gbcg-tab-item-cntr">
      <div>
        <h3 class="gbcg-tabname 0-117d9d200e03ddcd55bb479f74cfd65b" id="groovy">Groovy</h3>
        <div id="0-117d9d200e03ddcd55bb479f74cfd65b" class="gbcg-tab-item gbcb-Groovy">
          <pre><code class="lang-Gradle"><span class="hljs-keyword">dependencies</span> {
    implementation <span class="hljs-string">&apos;com.google.android.gms:play-services-location:16.0.0&apos;</span>
}
</code></pre>
        </div>
      </div>
      <div>
        <h3 class="gbcg-tabname 1-7cab94b5c6365e9499271dbdb955682c" id="kotlin">Kotlin</h3>
        <div id="1-7cab94b5c6365e9499271dbdb955682c" class="gbcg-tab-item gbcb-Kotlin">
          <pre><code class="lang-Kotlin">dependencies {
    implementation(<span class="hljs-string">&quot;com.google.android.gms:play-services-location:16.0.0&quot;</span>)
}
</code></pre>
        </div>
      </div>
    </div>
  </div>
</div></p>
<p><code>FusedLocationSource</code> requires an activity or fragment to process permissions in runtime. You should pass an activity or fragment object to the constructor and specify a permission request code. And then, you should pass the result of <code>onRequestPermissionResult()</code> to <a href="ref://../reference/com/naver/maps/map/util/FusedLocationSource.html#onRequestPermissionsResult%28int%2Cjava.lang.String%5B%5D%2Cint%5B%5D%29" target="_blank"><code>onRequestPermissionsResult()</code></a> of <code>FusedLocationSource</code>.</p>
<p>The following code example creates a <code>FusedLocationSource</code> in an activity and set it to <code>NaverMap</code>.</p>
<p><div id="6cf1101531cc37e5ccb320c921b59c27" class="gbcg gbcg-codegroup">
  <div class="gbcg-tab-selectors">
    <a id="select-0-608d1181bb4dfa817fbc13ae56b51fe7" class="gbcg-selector gbcg-active" data-tab="0-608d1181bb4dfa817fbc13ae56b51fe7" data-tab-category="undefined">Java</a>
    <a id="select-1-8835a93d49dad52b770b4950598dc894" class="gbcg-selector" data-tab="1-8835a93d49dad52b770b4950598dc894" data-tab-category="undefined">Kotlin</a>
  </div>
  <div class="gbcg-tab-contents">
    <div id="gbcg-tab-container">
      <div id="0-608d1181bb4dfa817fbc13ae56b51fe7" class="gbcg-tab-item gbcb-Java">
        <pre><code class="lang-Java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LocationTrackingActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span>
    <span class="hljs-keyword">implements</span> <span class="hljs-title">OnMapReadyCallback</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> LOCATION_PERMISSION_REQUEST_CODE = <span class="hljs-number">1000</span>;
    <span class="hljs-keyword">private</span> FusedLocationSource locationSource;
    <span class="hljs-keyword">private</span> NaverMap naverMap;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
        <span class="hljs-comment">// ...</span>
        locationSource =
            <span class="hljs-keyword">new</span> FusedLocationSource(<span class="hljs-keyword">this</span>, LOCATION_PERMISSION_REQUEST_CODE);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onRequestPermissionsResult</span><span class="hljs-params">(<span class="hljs-keyword">int</span> requestCode,
        @NonNull String[] permissions,  @NonNull <span class="hljs-keyword">int</span>[] grantResults)</span> </span>{
        <span class="hljs-keyword">if</span> (locationSource.onRequestPermissionsResult(
            requestCode, permissions, grantResults)) {
            <span class="hljs-keyword">if</span> (!locationSource.isActivated()) { <span class="hljs-comment">// Permission denied</span>
                naverMap.setLocationTrackingMode(LocationTrackingMode.None);
            }
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">super</span>.onRequestPermissionsResult(
            requestCode, permissions, grantResults);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onMapReady</span><span class="hljs-params">(@NonNull NaverMap naverMap)</span> </span>{
        <span class="hljs-keyword">this</span>.naverMap = naverMap;
        naverMap.setLocationSource(locationSource);
    }
}
</code></pre>
      </div>
    </div>
    <div class="gbcg-tab-item-cntr">
      <div>
        <h3 class="gbcg-tabname 0-608d1181bb4dfa817fbc13ae56b51fe7" id="java">Java</h3>
        <div id="0-608d1181bb4dfa817fbc13ae56b51fe7" class="gbcg-tab-item gbcb-Java">
          <pre><code class="lang-Java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LocationTrackingActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span>
    <span class="hljs-keyword">implements</span> <span class="hljs-title">OnMapReadyCallback</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> LOCATION_PERMISSION_REQUEST_CODE = <span class="hljs-number">1000</span>;
    <span class="hljs-keyword">private</span> FusedLocationSource locationSource;
    <span class="hljs-keyword">private</span> NaverMap naverMap;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
        <span class="hljs-comment">// ...</span>
        locationSource =
            <span class="hljs-keyword">new</span> FusedLocationSource(<span class="hljs-keyword">this</span>, LOCATION_PERMISSION_REQUEST_CODE);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onRequestPermissionsResult</span><span class="hljs-params">(<span class="hljs-keyword">int</span> requestCode,
        @NonNull String[] permissions,  @NonNull <span class="hljs-keyword">int</span>[] grantResults)</span> </span>{
        <span class="hljs-keyword">if</span> (locationSource.onRequestPermissionsResult(
            requestCode, permissions, grantResults)) {
            <span class="hljs-keyword">if</span> (!locationSource.isActivated()) { <span class="hljs-comment">// Permission denied</span>
                naverMap.setLocationTrackingMode(LocationTrackingMode.None);
            }
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">super</span>.onRequestPermissionsResult(
            requestCode, permissions, grantResults);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onMapReady</span><span class="hljs-params">(@NonNull NaverMap naverMap)</span> </span>{
        <span class="hljs-keyword">this</span>.naverMap = naverMap;
        naverMap.setLocationSource(locationSource);
    }
}
</code></pre>
        </div>
      </div>
      <div>
        <h3 class="gbcg-tabname 1-8835a93d49dad52b770b4950598dc894" id="kotlin">Kotlin</h3>
        <div id="1-8835a93d49dad52b770b4950598dc894" class="gbcg-tab-item gbcb-Kotlin">
          <pre><code class="lang-Kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LocationTrackingActivity</span> : <span class="hljs-type">AppCompatActivity</span></span>(), OnMapReadyCallback {
    <span class="hljs-keyword">private</span> lateinit <span class="hljs-variable"><span class="hljs-keyword">var</span> locationSource</span>: FusedLocationSource
    <span class="hljs-keyword">private</span> lateinit <span class="hljs-variable"><span class="hljs-keyword">var</span> naverMap</span>: NaverMap

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle?</span>)</span> {</span>
        super.onCreate(savedInstanceState)
        <span class="hljs-comment">// ...</span>
        locationSource =
               FusedLocationSource(this, LOCATION_PERMISSION_REQUEST_CODE)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onRequestPermissionsResult</span><span class="hljs-params">(requestCode: <span class="hljs-type">Int,
                                            permissions: Array&lt;String&gt;,
                                            grantResults: IntArray</span>)</span> {</span>
        <span class="hljs-keyword">if</span> (locationSource.onRequestPermissionsResult(requestCode, permissions,
                grantResults)) {
            <span class="hljs-keyword">if</span> (!locationSource.isActivated) { <span class="hljs-comment">// Permission denied</span>
                naverMap.locationTrackingMode = LocationTrackingMode.None
            }
            <span class="hljs-keyword">return</span>
        }
        super.onRequestPermissionsResult(requestCode, permissions, grantResults)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onMapReady</span><span class="hljs-params">(naverMap: <span class="hljs-type">NaverMap</span>)</span> {</span>
        this.naverMap = naverMap
        naverMap.locationSource = locationSource
    }

    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-keyword">private</span> const <span class="hljs-variable"><span class="hljs-keyword">val</span> LOCATION_PERMISSION_REQUEST_CODE</span> = <span class="hljs-number">1000</span>
    }
}
</code></pre>
        </div>
      </div>
    </div>
  </div>
</div></p>
<h3 id="location-tracking-mode">Location tracking mode</h3>
<p>You can set <code>LocationSource</code> to <code>NaverMap</code> to use the location tracking feature. There are two ways to use the location tracking feature:</p>
<ul>
<li>Enable location tracking mode: Call <a href="ref://../reference/com/naver/maps/map/NaverMap.html#setLocationTrackingMode%28com.naver.maps.map.LocationTrackingMode%29" target="_blank"><code>setLocationTrackingMode()</code></a> to programmatically enable the location tracking mode.</li>
<li>Enable current location button control: Use <a href="ref://../reference/com/naver/maps/map/UiSettings.html#setLocationButtonEnabled%28boolean%29" target="_blank"><code>UiSettings.setLocationButtonEnabled(true)</code></a> to enable the current location button control, and the location tracking mode is enabled or disabled by a user&#x2019;s click on the button.</li>
</ul>
<p>The location tracking mode is subdivided into the following four modes, which are defined in the <a href="ref://../reference/com/naver/maps/map/LocationTrackingMode.html" target="_blank"><code>LocationTrackingMode</code></a> enum.</p>
<ul>
<li><a href="ref://../reference/com/naver/maps/map/LocationTrackingMode.html#None" target="_blank"><code>None</code></a>: Location is not tracked.</li>
<li><a href="ref://../reference/com/naver/maps/map/LocationTrackingMode.html#NoFollow" target="_blank"><code>NoFollow</code></a>: Location tracking is enabled, and the current location overlay moves following a user&#x2019;s location. However, the map does not move.</li>
</ul>
<p><img src="../assets/4-tracking-no-follow.png" alt="NoFollow mode enabled"></p>
<ul>
<li><a href="ref://../reference/com/naver/maps/map/LocationTrackingMode.html#Follow" target="_blank"><code>Follow</code></a>: Location tracking is enabled, and the current location overlay and the camera&#x2019;s coordinates move following a user&#x2019;s location. If the camera moves according to an API call or a user&#x2019;s gestures, the mode turns into <code>NoFollow</code>.</li>
</ul>
<p><img src="../assets/4-tracking-follow.png" alt="Follow mode enabled"></p>
<ul>
<li><a href="ref://../reference/com/naver/maps/map/LocationTrackingMode.html#Face" target="_blank"><code>Face</code></a>: Location tracking is enabled, and the current location overlay, the camera&#x2019;s coordinates and bearing move following a user&#x2019;s location and direction. If the camera moves according to an API call or a user&#x2019;s gestures, the mode turns into <code>NoFollow</code>.</li>
</ul>
<p><img src="../assets/4-tracking-face.png" alt="Face mode enabled"></p>
<p>The following code example sets the location tracking mode to <code>Follow</code> by calling <code>setLocationTrackingMode()</code>.</p>
<p><div id="c2adbfbce952c6316f53ac595664d0b4" class="gbcg gbcg-codegroup">
  <div class="gbcg-tab-selectors">
    <a id="select-0-5d097c6aa77826629448b84e3977326d" class="gbcg-selector gbcg-active" data-tab="0-5d097c6aa77826629448b84e3977326d" data-tab-category="undefined">Java</a>
    <a id="select-1-15db6691a63dc0cad8f607ffc38a573b" class="gbcg-selector" data-tab="1-15db6691a63dc0cad8f607ffc38a573b" data-tab-category="undefined">Kotlin</a>
  </div>
  <div class="gbcg-tab-contents">
    <div id="gbcg-tab-container">
      <div id="0-5d097c6aa77826629448b84e3977326d" class="gbcg-tab-item gbcb-Java">
        <pre><code class="lang-Java">naverMap.setLocationTrackingMode(LocationTrackingMode.Follow);
</code></pre>
      </div>
    </div>
    <div class="gbcg-tab-item-cntr">
      <div>
        <h3 class="gbcg-tabname 0-5d097c6aa77826629448b84e3977326d" id="java">Java</h3>
        <div id="0-5d097c6aa77826629448b84e3977326d" class="gbcg-tab-item gbcb-Java">
          <pre><code class="lang-Java">naverMap.setLocationTrackingMode(LocationTrackingMode.Follow);
</code></pre>
        </div>
      </div>
      <div>
        <h3 class="gbcg-tabname 1-15db6691a63dc0cad8f607ffc38a573b" id="kotlin">Kotlin</h3>
        <div id="1-15db6691a63dc0cad8f607ffc38a573b" class="gbcg-tab-item gbcb-Kotlin">
          <pre><code class="lang-Kotlin">naverMap.locationTrackingMode = LocationTrackingMode.Follow
</code></pre>
        </div>
      </div>
    </div>
  </div>
</div></p>
<h2 id="location-change-event">Location change event</h2>
<p>Add <a href="ref://../reference/com/naver/maps/map/NaverMap.OnLocationChangeListener.html" target="_blank"><code>OnLocationChangeListener</code></a> with the <a href="ref://../reference/com/naver/maps/map/NaverMap.html#addOnLocationChangeListener%28com.naver.maps.map.NaverMap.OnLocationChangeListener%29" target="_blank"><code>addOnLocationChangeListener()</code></a> method to receive an event for location changes. If the location tracking mode is enabled and a user&#x2019;s location changes, the <a href="ref://../reference/com/naver/maps/map/NaverMap.OnLocationChangeListener.html#onLocationChange%28android.location.Location%29" target="_blank"><code>onLocationChange()</code></a> callback method is called with the user&#x2019;s location passed as a parameter.</p>
<p>The following code example displays a user&#x2019;s location coordinates as a toast message when the location changes.</p>
<p><div id="8cc478b758f7d7fbbd71f9e6fce298a6" class="gbcg gbcg-codegroup">
  <div class="gbcg-tab-selectors">
    <a id="select-0-2578c5e7f7b17cf9ac3551ccae61c058" class="gbcg-selector gbcg-active" data-tab="0-2578c5e7f7b17cf9ac3551ccae61c058" data-tab-category="undefined">Java</a>
    <a id="select-1-e947f738d61e839807b136825f8d8749" class="gbcg-selector" data-tab="1-e947f738d61e839807b136825f8d8749" data-tab-category="undefined">Kotlin</a>
  </div>
  <div class="gbcg-tab-contents">
    <div id="gbcg-tab-container">
      <div id="0-2578c5e7f7b17cf9ac3551ccae61c058" class="gbcg-tab-item gbcb-Java">
        <pre><code class="lang-Java">naverMap.addOnLocationChangeListener(location -&gt;
    Toast.makeText(<span class="hljs-keyword">this</span>,
        location.getLatitude() + <span class="hljs-string">&quot;, &quot;</span> + location.getLongitude(),
        Toast.LENGTH_SHORT).show());
</code></pre>
      </div>
    </div>
    <div class="gbcg-tab-item-cntr">
      <div>
        <h3 class="gbcg-tabname 0-2578c5e7f7b17cf9ac3551ccae61c058" id="java">Java</h3>
        <div id="0-2578c5e7f7b17cf9ac3551ccae61c058" class="gbcg-tab-item gbcb-Java">
          <pre><code class="lang-Java">naverMap.addOnLocationChangeListener(location -&gt;
    Toast.makeText(<span class="hljs-keyword">this</span>,
        location.getLatitude() + <span class="hljs-string">&quot;, &quot;</span> + location.getLongitude(),
        Toast.LENGTH_SHORT).show());
</code></pre>
        </div>
      </div>
      <div>
        <h3 class="gbcg-tabname 1-e947f738d61e839807b136825f8d8749" id="kotlin">Kotlin</h3>
        <div id="1-e947f738d61e839807b136825f8d8749" class="gbcg-tab-item gbcb-Kotlin">
          <pre><code class="lang-Kotlin">naverMap.addOnLocationChangeListener { location -&gt;
    Toast.makeText(this, <span class="hljs-string">&quot;${location.latitude}, ${location.longitude}&quot;</span>,
             Toast.LENGTH_SHORT).show()
}
</code></pre>
        </div>
      </div>
    </div>
  </div>
</div></p>
<h2 id="custom-implementation">Custom implementation</h2>
<p>If it is hard to use the <code>LocationSource</code> or the location tracking feature supported by the NAVER Maps SDK, you can implement your own location tracking feature.</p>
<h3 id="custom-location-source">Custom location source</h3>
<p>If you use the embedded location tracking mode, it is recommended to use <code>FusedLocationSource</code> which supports sensors and the well-designed permission handling feature. If needed, however, you can implement <code>LocationSource</code> on your own.</p>
<p>Methods of <code>LocationSource</code> are called by the NAVER Maps SDK. The <a href="ref://../reference/com/naver/maps/map/LocationSource.html#activate%28com.naver.maps.map.LocationSource.OnLocationChangedListener%29" target="_blank"><code>activate()</code></a> method is called if the location tracking mode is enabled, and the <a href="ref://../reference/com/naver/maps/map/LocationSource.html#deactivate%28%29" target="_blank"><code>deactivate()</code></a> method is called if disabled. Therefore, the implementation of <code>LocationSource</code> should start tracking a user&#x2019;s location when the <code>activate()</code> is called, and stop tracking it when the <code>deactivate()</code> is called. In addition, while the location tracking is enabled, the <a href="ref://../reference/com/naver/maps/map/LocationSource.OnLocationChangedListener.html" target="_blank"><code>LocationSource.OnLocationChangedListener</code></a> object&#x2019;s <a href="ref://../reference/com/naver/maps/map/LocationSource.OnLocationChangedListener.html#onLocationChanged%28android.location.Location%29" target="_blank"><code>onLocationChanged()</code></a> passed to the <code>activate()</code> should be called whenever the user&#x2019;s location changes.</p>
<p><code>LocationSource</code> is also responsible for handling location permissions. When the <code>activate()</code> method is called, <code>LocationSource</code> should check and request permissions.</p>
<p>The following code example shows an implementation of <code>LocationSource</code> that receives GPS locations by using <a href="https://developer.android.com/reference/android/location/LocationManager" target="_blank"><code>LocationManager</code></a>.</p>
<p><div id="cb56c09aff48934ac17cb8305405ac27" class="gbcg gbcg-codegroup">
  <div class="gbcg-tab-selectors">
    <a id="select-0-68bd961e4043085337f74b657481b110" class="gbcg-selector gbcg-active" data-tab="0-68bd961e4043085337f74b657481b110" data-tab-category="undefined">Java</a>
    <a id="select-1-3f8e8c3e98e410f4ff275741b89a9070" class="gbcg-selector" data-tab="1-3f8e8c3e98e410f4ff275741b89a9070" data-tab-category="undefined">Kotlin</a>
  </div>
  <div class="gbcg-tab-contents">
    <div id="gbcg-tab-container">
      <div id="0-68bd961e4043085337f74b657481b110" class="gbcg-tab-item gbcb-Java">
        <pre><code class="lang-Java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GpsOnlyLocationSource</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">LocationSource</span>, <span class="hljs-title">LocationListener</span> </span>{
    <span class="hljs-meta">@NonNull</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Context context;
    <span class="hljs-meta">@Nullable</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> LocationManager locationManager;
    <span class="hljs-meta">@Nullable</span>
    <span class="hljs-keyword">private</span> LocationSource.OnLocationChangedListener listener;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">GpsOnlyLocationSource</span><span class="hljs-params">(@NonNull Context context)</span> </span>{
        <span class="hljs-keyword">this</span>.context = context;
        locationManager =
            (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">activate</span><span class="hljs-params">(
        @NonNull LocationSource.OnLocationChangedListener listener)</span> </span>{
        <span class="hljs-keyword">if</span> (locationManager == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">if</span> (PermissionChecker.checkSelfPermission(context,
            Manifest.permission.ACCESS_FINE_LOCATION)
            != PackageManager.PERMISSION_GRANTED
            &amp;&amp; PermissionChecker.checkSelfPermission(context,
            Manifest.permission.ACCESS_COARSE_LOCATION)
            != PackageManager.PERMISSION_GRANTED) {
            <span class="hljs-comment">// Permission request logic omitted.</span>
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">this</span>.listener = listener;
        locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, <span class="hljs-number">1000</span>, <span class="hljs-number">10</span>, <span class="hljs-keyword">this</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">deactivate</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (locationManager == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">return</span>;
        }

        listener = <span class="hljs-keyword">null</span>;
        locationManager.removeUpdates(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onLocationChanged</span><span class="hljs-params">(Location location)</span> </span>{
        <span class="hljs-keyword">if</span> (listener != <span class="hljs-keyword">null</span>) {
            listener.onLocationChanged(location);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onStatusChanged</span><span class="hljs-params">(String provider, <span class="hljs-keyword">int</span> status, Bundle extras)</span> </span>{
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onProviderEnabled</span><span class="hljs-params">(String provider)</span> </span>{
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onProviderDisabled</span><span class="hljs-params">(String provider)</span> </span>{
    }
}
</code></pre>
      </div>
    </div>
    <div class="gbcg-tab-item-cntr">
      <div>
        <h3 class="gbcg-tabname 0-68bd961e4043085337f74b657481b110" id="java">Java</h3>
        <div id="0-68bd961e4043085337f74b657481b110" class="gbcg-tab-item gbcb-Java">
          <pre><code class="lang-Java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GpsOnlyLocationSource</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">LocationSource</span>, <span class="hljs-title">LocationListener</span> </span>{
    <span class="hljs-meta">@NonNull</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Context context;
    <span class="hljs-meta">@Nullable</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> LocationManager locationManager;
    <span class="hljs-meta">@Nullable</span>
    <span class="hljs-keyword">private</span> LocationSource.OnLocationChangedListener listener;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">GpsOnlyLocationSource</span><span class="hljs-params">(@NonNull Context context)</span> </span>{
        <span class="hljs-keyword">this</span>.context = context;
        locationManager =
            (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">activate</span><span class="hljs-params">(
        @NonNull LocationSource.OnLocationChangedListener listener)</span> </span>{
        <span class="hljs-keyword">if</span> (locationManager == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">if</span> (PermissionChecker.checkSelfPermission(context,
            Manifest.permission.ACCESS_FINE_LOCATION)
            != PackageManager.PERMISSION_GRANTED
            &amp;&amp; PermissionChecker.checkSelfPermission(context,
            Manifest.permission.ACCESS_COARSE_LOCATION)
            != PackageManager.PERMISSION_GRANTED) {
            <span class="hljs-comment">// Permission request logic omitted.</span>
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">this</span>.listener = listener;
        locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, <span class="hljs-number">1000</span>, <span class="hljs-number">10</span>, <span class="hljs-keyword">this</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">deactivate</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (locationManager == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">return</span>;
        }

        listener = <span class="hljs-keyword">null</span>;
        locationManager.removeUpdates(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onLocationChanged</span><span class="hljs-params">(Location location)</span> </span>{
        <span class="hljs-keyword">if</span> (listener != <span class="hljs-keyword">null</span>) {
            listener.onLocationChanged(location);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onStatusChanged</span><span class="hljs-params">(String provider, <span class="hljs-keyword">int</span> status, Bundle extras)</span> </span>{
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onProviderEnabled</span><span class="hljs-params">(String provider)</span> </span>{
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onProviderDisabled</span><span class="hljs-params">(String provider)</span> </span>{
    }
}
</code></pre>
        </div>
      </div>
      <div>
        <h3 class="gbcg-tabname 1-3f8e8c3e98e410f4ff275741b89a9070" id="kotlin">Kotlin</h3>
        <div id="1-3f8e8c3e98e410f4ff275741b89a9070" class="gbcg-tab-item gbcb-Kotlin">
          <pre><code class="lang-Kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GpsOnlyLocationSource</span></span>(
        <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-keyword">val</span> context</span>: Context) : LocationSource, LocationListener {
    <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-keyword">val</span> locationManager</span> = context
            .getSystemService(Context.LOCATION_SERVICE) <span class="hljs-keyword">as</span> LocationManager?
    <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-keyword">var</span> listener</span>: LocationSource.OnLocationChangedListener? = <span class="hljs-literal">null</span>

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">activate</span><span class="hljs-params">(listener: <span class="hljs-type">LocationSource.OnLocationChangedListener</span>)</span> {</span>
        <span class="hljs-keyword">if</span> (locationManager == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span>
        }

        <span class="hljs-keyword">if</span> (PermissionChecker.checkSelfPermission(context,
                        Manifest.permission.ACCESS_FINE_LOCATION)
                != PackageManager.PERMISSION_GRANTED
                &amp;&amp; PermissionChecker.checkSelfPermission(context,
                        Manifest.permission.ACCESS_COARSE_LOCATION)
                != PackageManager.PERMISSION_GRANTED) {
            <span class="hljs-comment">// Permission request logic omitted.</span>
            <span class="hljs-keyword">return</span>
        }

        this.listener = listener
        locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, <span class="hljs-number">1000</span>, <span class="hljs-number">10</span>f, this)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">deactivate</span><span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">if</span> (locationManager == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span>
        }

        listener = <span class="hljs-literal">null</span>
        locationManager.removeUpdates(this)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onLocationChanged</span><span class="hljs-params">(location: <span class="hljs-type">Location</span>)</span> {</span>
        listener?.onLocationChanged(location)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onStatusChanged</span><span class="hljs-params">(provider: <span class="hljs-type">String, status: Int,
                                 extras: Bundle</span>)</span> {</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onProviderEnabled</span><span class="hljs-params">(provider: <span class="hljs-type">String</span>)</span> {</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onProviderDisabled</span><span class="hljs-params">(provider: <span class="hljs-type">String</span>)</span> {</span>
    }
}
</code></pre>
        </div>
      </div>
    </div>
  </div>
</div></p>
<h3 id="custom-location-tracking">Custom location tracking</h3>
<p>You do not need to use the embedded location tracking feature when displaying a user&#x2019;s location on the map. You can customize the feature as you need, by specifying the <code>LocationOverlay</code>&#x2019;s <code>position</code> and <code>bearing</code> to move the camera after directly receiving location events in your app. </p>
<p>The following code example receives GPS locations by using <code>LocationManager</code> in an activity and moves the <code>LocationOverlay</code> and the camera.</p>
<p><div id="1cf7258703b40faba41cd8693106587d" class="gbcg gbcg-codegroup">
  <div class="gbcg-tab-selectors">
    <a id="select-0-a2d4a25236947c8305577c77725df426" class="gbcg-selector gbcg-active" data-tab="0-a2d4a25236947c8305577c77725df426" data-tab-category="undefined">Java</a>
    <a id="select-1-f5c465b2f5b7cbee3fa1c3bdbffb3c10" class="gbcg-selector" data-tab="1-f5c465b2f5b7cbee3fa1c3bdbffb3c10" data-tab-category="undefined">Kotlin</a>
  </div>
  <div class="gbcg-tab-contents">
    <div id="gbcg-tab-container">
      <div id="0-a2d4a25236947c8305577c77725df426" class="gbcg-tab-item gbcb-Java">
        <pre><code class="lang-Java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomLocationTrackingActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span>
    <span class="hljs-keyword">implements</span> <span class="hljs-title">LocationListener</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> PERMISSION_REQUEST_CODE = <span class="hljs-number">100</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String[] PERMISSIONS = {
        Manifest.permission.ACCESS_FINE_LOCATION,
        Manifest.permission.ACCESS_COARSE_LOCATION
    };

    <span class="hljs-keyword">private</span> NaverMap map;
    <span class="hljs-meta">@Nullable</span>
    <span class="hljs-keyword">private</span> LocationManager locationManager;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);

        <span class="hljs-comment">// ...</span>

        FragmentManager fm = getSupportFragmentManager();
        MapFragment mapFragment = (MapFragment)fm.findFragmentById(R.id.map);
        <span class="hljs-keyword">if</span> (mapFragment == <span class="hljs-keyword">null</span>) {
            mapFragment = MapFragment.newInstance();
            fm.beginTransaction().add(R.id.map, mapFragment).commit();
        }
        mapFragment.getMapAsync(naverMap -&gt; map = naverMap);

        locationManager = (LocationManager)getSystemService(LOCATION_SERVICE);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onRequestPermissionsResult</span><span class="hljs-params">(<span class="hljs-keyword">int</span> requestCode,
        @NonNull String[] permissions, @NonNull <span class="hljs-keyword">int</span>[] grantResults)</span> </span>{

        <span class="hljs-keyword">if</span> (requestCode == PERMISSION_REQUEST_CODE) {
            <span class="hljs-keyword">if</span> (hasPermission() &amp;&amp; locationManager != <span class="hljs-keyword">null</span>) {
                locationManager.requestLocationUpdates(
                    LocationManager.GPS_PROVIDER, <span class="hljs-number">1000</span>, <span class="hljs-number">10</span>, <span class="hljs-keyword">this</span>);
            }
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">super</span>.onRequestPermissionsResult(
            requestCode, permissions, grantResults);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onStart</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">super</span>.onStart();

        <span class="hljs-keyword">if</span> (hasPermission()) {
            <span class="hljs-keyword">if</span> (locationManager != <span class="hljs-keyword">null</span>) {
                locationManager.requestLocationUpdates(
                    LocationManager.GPS_PROVIDER, <span class="hljs-number">1000</span>, <span class="hljs-number">10</span>, <span class="hljs-keyword">this</span>);
            }
        } <span class="hljs-keyword">else</span> {
            ActivityCompat.requestPermissions(
                <span class="hljs-keyword">this</span>, PERMISSIONS, PERMISSION_REQUEST_CODE);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onStop</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">super</span>.onStop();
        <span class="hljs-keyword">if</span> (locationManager != <span class="hljs-keyword">null</span>) {
            locationManager.removeUpdates(<span class="hljs-keyword">this</span>);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onLocationChanged</span><span class="hljs-params">(Location location)</span> </span>{
        <span class="hljs-keyword">if</span> (map == <span class="hljs-keyword">null</span> || location == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">return</span>;
        }

        LatLng coord = <span class="hljs-keyword">new</span> LatLng(location);

        LocationOverlay locationOverlay = map.getLocationOverlay();
        locationOverlay.setVisible(<span class="hljs-keyword">true</span>);
        locationOverlay.setPosition(coord);
        locationOverlay.setBearing(location.getBearing());

        map.moveCamera(CameraUpdate.scrollTo(coord));
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onStatusChanged</span><span class="hljs-params">(String provider, <span class="hljs-keyword">int</span> status, Bundle extras)</span> </span>{
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onProviderEnabled</span><span class="hljs-params">(String provider)</span> </span>{
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onProviderDisabled</span><span class="hljs-params">(String provider)</span> </span>{
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">hasPermission</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> PermissionChecker.checkSelfPermission(<span class="hljs-keyword">this</span>, PERMISSIONS[<span class="hljs-number">0</span>])
            == PermissionChecker.PERMISSION_GRANTED
            &amp;&amp; PermissionChecker.checkSelfPermission(<span class="hljs-keyword">this</span>, PERMISSIONS[<span class="hljs-number">1</span>])
            == PermissionChecker.PERMISSION_GRANTED;
    }
}
</code></pre>
      </div>
    </div>
    <div class="gbcg-tab-item-cntr">
      <div>
        <h3 class="gbcg-tabname 0-a2d4a25236947c8305577c77725df426" id="java">Java</h3>
        <div id="0-a2d4a25236947c8305577c77725df426" class="gbcg-tab-item gbcb-Java">
          <pre><code class="lang-Java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomLocationTrackingActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span>
    <span class="hljs-keyword">implements</span> <span class="hljs-title">LocationListener</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> PERMISSION_REQUEST_CODE = <span class="hljs-number">100</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String[] PERMISSIONS = {
        Manifest.permission.ACCESS_FINE_LOCATION,
        Manifest.permission.ACCESS_COARSE_LOCATION
    };

    <span class="hljs-keyword">private</span> NaverMap map;
    <span class="hljs-meta">@Nullable</span>
    <span class="hljs-keyword">private</span> LocationManager locationManager;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);

        <span class="hljs-comment">// ...</span>

        FragmentManager fm = getSupportFragmentManager();
        MapFragment mapFragment = (MapFragment)fm.findFragmentById(R.id.map);
        <span class="hljs-keyword">if</span> (mapFragment == <span class="hljs-keyword">null</span>) {
            mapFragment = MapFragment.newInstance();
            fm.beginTransaction().add(R.id.map, mapFragment).commit();
        }
        mapFragment.getMapAsync(naverMap -&gt; map = naverMap);

        locationManager = (LocationManager)getSystemService(LOCATION_SERVICE);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onRequestPermissionsResult</span><span class="hljs-params">(<span class="hljs-keyword">int</span> requestCode,
        @NonNull String[] permissions, @NonNull <span class="hljs-keyword">int</span>[] grantResults)</span> </span>{

        <span class="hljs-keyword">if</span> (requestCode == PERMISSION_REQUEST_CODE) {
            <span class="hljs-keyword">if</span> (hasPermission() &amp;&amp; locationManager != <span class="hljs-keyword">null</span>) {
                locationManager.requestLocationUpdates(
                    LocationManager.GPS_PROVIDER, <span class="hljs-number">1000</span>, <span class="hljs-number">10</span>, <span class="hljs-keyword">this</span>);
            }
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">super</span>.onRequestPermissionsResult(
            requestCode, permissions, grantResults);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onStart</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">super</span>.onStart();

        <span class="hljs-keyword">if</span> (hasPermission()) {
            <span class="hljs-keyword">if</span> (locationManager != <span class="hljs-keyword">null</span>) {
                locationManager.requestLocationUpdates(
                    LocationManager.GPS_PROVIDER, <span class="hljs-number">1000</span>, <span class="hljs-number">10</span>, <span class="hljs-keyword">this</span>);
            }
        } <span class="hljs-keyword">else</span> {
            ActivityCompat.requestPermissions(
                <span class="hljs-keyword">this</span>, PERMISSIONS, PERMISSION_REQUEST_CODE);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onStop</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">super</span>.onStop();
        <span class="hljs-keyword">if</span> (locationManager != <span class="hljs-keyword">null</span>) {
            locationManager.removeUpdates(<span class="hljs-keyword">this</span>);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onLocationChanged</span><span class="hljs-params">(Location location)</span> </span>{
        <span class="hljs-keyword">if</span> (map == <span class="hljs-keyword">null</span> || location == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">return</span>;
        }

        LatLng coord = <span class="hljs-keyword">new</span> LatLng(location);

        LocationOverlay locationOverlay = map.getLocationOverlay();
        locationOverlay.setVisible(<span class="hljs-keyword">true</span>);
        locationOverlay.setPosition(coord);
        locationOverlay.setBearing(location.getBearing());

        map.moveCamera(CameraUpdate.scrollTo(coord));
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onStatusChanged</span><span class="hljs-params">(String provider, <span class="hljs-keyword">int</span> status, Bundle extras)</span> </span>{
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onProviderEnabled</span><span class="hljs-params">(String provider)</span> </span>{
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onProviderDisabled</span><span class="hljs-params">(String provider)</span> </span>{
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">hasPermission</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> PermissionChecker.checkSelfPermission(<span class="hljs-keyword">this</span>, PERMISSIONS[<span class="hljs-number">0</span>])
            == PermissionChecker.PERMISSION_GRANTED
            &amp;&amp; PermissionChecker.checkSelfPermission(<span class="hljs-keyword">this</span>, PERMISSIONS[<span class="hljs-number">1</span>])
            == PermissionChecker.PERMISSION_GRANTED;
    }
}
</code></pre>
        </div>
      </div>
      <div>
        <h3 class="gbcg-tabname 1-f5c465b2f5b7cbee3fa1c3bdbffb3c10" id="kotlin">Kotlin</h3>
        <div id="1-f5c465b2f5b7cbee3fa1c3bdbffb3c10" class="gbcg-tab-item gbcb-Kotlin">
          <pre><code class="lang-Kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomLocationTrackingActivity</span> : <span class="hljs-type">AppCompatActivity</span></span>(), LocationListener {
    <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-keyword">var</span> map</span>: NaverMap? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-keyword">var</span> locationManager</span>: LocationManager? = <span class="hljs-literal">null</span>

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle?</span>)</span> {</span>
        super.onCreate(savedInstanceState)

        <span class="hljs-comment">// ...</span>

        <span class="hljs-variable"><span class="hljs-keyword">val</span> fm</span> = supportFragmentManager
        <span class="hljs-variable"><span class="hljs-keyword">val</span> mapFragment</span> = fm.findFragmentById(R.id.map) <span class="hljs-keyword">as</span> MapFragment?
                ?: MapFragment.newInstance().also {
                    fm.beginTransaction().add(R.id.map, it).commit()
                }

        mapFragment.getMapAsync { naverMap -&gt;
            map = naverMap
        }

        locationManager = getSystemService(LOCATION_SERVICE) <span class="hljs-keyword">as</span> LocationManager?
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onRequestPermissionsResult</span><span class="hljs-params">(requestCode: <span class="hljs-type">Int,
                                            permissions: Array&lt;String&gt;,
                                            grantResults: IntArray</span>)</span> {</span>

        <span class="hljs-keyword">if</span> (requestCode == PERMISSION_REQUEST_CODE) {
            <span class="hljs-keyword">if</span> (hasPermission()) {
                locationManager?.requestLocationUpdates(
                        LocationManager.GPS_PROVIDER, <span class="hljs-number">1000</span>, <span class="hljs-number">10</span>f, this)
            }
            <span class="hljs-keyword">return</span>
        }

        super.onRequestPermissionsResult(requestCode, permissions, grantResults)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onStart</span><span class="hljs-params">()</span> {</span>
        super.onStart()

        <span class="hljs-keyword">if</span> (hasPermission()) {
            locationManager?.requestLocationUpdates(
                    LocationManager.GPS_PROVIDER, <span class="hljs-number">1000</span>, <span class="hljs-number">10</span>f, this)
        } <span class="hljs-keyword">else</span> {
            ActivityCompat.requestPermissions(
                    this, PERMISSIONS, PERMISSION_REQUEST_CODE)
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onStop</span><span class="hljs-params">()</span> {</span>
        super.onStop()
        locationManager?.removeUpdates(this)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onLocationChanged</span><span class="hljs-params">(location: <span class="hljs-type">Location?</span>)</span> {</span>
        <span class="hljs-keyword">if</span> (location == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span>
        }

        map?.let {
            <span class="hljs-variable"><span class="hljs-keyword">val</span> coord</span> = LatLng(location)

            <span class="hljs-variable"><span class="hljs-keyword">val</span> locationOverlay</span> = it.locationOverlay
            locationOverlay.isVisible = <span class="hljs-literal">true</span>
            locationOverlay.position = coord
            locationOverlay.bearing = location.bearing

            it.moveCamera(CameraUpdate.scrollTo(coord))
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onStatusChanged</span><span class="hljs-params">(provider: <span class="hljs-type">String, status: Int,
                                 extras: Bundle</span>)</span> {</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onProviderEnabled</span><span class="hljs-params">(provider: <span class="hljs-type">String</span>)</span> {</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onProviderDisabled</span><span class="hljs-params">(provider: <span class="hljs-type">String</span>)</span> {</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">hasPermission</span><span class="hljs-params">()</span>: <span class="hljs-keyword">Boolean</span> {</span>
        <span class="hljs-keyword">return</span> PermissionChecker.checkSelfPermission(this, PERMISSIONS[<span class="hljs-number">0</span>]) ==
                PermissionChecker.PERMISSION_GRANTED &amp;&amp;
                PermissionChecker.checkSelfPermission(this, PERMISSIONS[<span class="hljs-number">1</span>]) ==
                PermissionChecker.PERMISSION_GRANTED
    }

    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-keyword">private</span> const <span class="hljs-variable"><span class="hljs-keyword">val</span> PERMISSION_REQUEST_CODE</span> = <span class="hljs-number">100</span>
        <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-keyword">val</span> PERMISSIONS</span> = arrayOf(
                Manifest.permission.ACCESS_FINE_LOCATION,
                Manifest.permission.ACCESS_COARSE_LOCATION)
    }
}
</code></pre>
        </div>
      </div>
    </div>
  </div>
</div></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="4-1.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: User Interface">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Location","level":"2.4.2","depth":2,"next":{"title":"Overlay","level":"2.5","depth":1,"ref":"","articles":[{"title":"Overlays","level":"2.5.1","depth":2,"path":"5-1.md","ref":"5-1.md","articles":[]},{"title":"Marker","level":"2.5.2","depth":2,"path":"5-2.md","ref":"5-2.md","articles":[]},{"title":"Info Window","level":"2.5.3","depth":2,"path":"5-3.md","ref":"5-3.md","articles":[]},{"title":"Shapes","level":"2.5.4","depth":2,"path":"5-4.md","ref":"5-4.md","articles":[]},{"title":"Location Overlay","level":"2.5.5","depth":2,"path":"5-5.md","ref":"5-5.md","articles":[]},{"title":"Ground Overlay","level":"2.5.6","depth":2,"path":"5-6.md","ref":"5-6.md","articles":[]},{"title":"Path and Arrow","level":"2.5.7","depth":2,"path":"5-7.md","ref":"5-7.md","articles":[]}]},"previous":{"title":"User Interface","level":"2.4.1","depth":2,"path":"4-1.md","ref":"4-1.md","articles":[]},"dir":"ltr"},"config":{"plugins":["otherlink","codegroup"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"otherlink":{},"codegroup":{"defaultTabName":"Code","rememberTabs":"false","tabNameSeperator":"::"},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"home.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"NAVER Map Android SDK","gitbook":"*"},"file":{"path":"4-2.md","mtime":"2020-08-21T05:47:46.954Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-08-21T05:47:47.822Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-otherlink/js/otherlink.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-codegroup/code.group.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

